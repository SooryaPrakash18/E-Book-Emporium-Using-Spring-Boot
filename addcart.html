<!DOCTYPE html>
<html>
<head>
    <title>Book Shopping Cart</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/card.css">
    <style>
        .payment-options {
            margin-top: 20px;
        }
        .payment-option {
            margin-bottom: 10px;
        }
        .payment-method-details {
            display: none;
            margin-top: 10px;
        }
        .error-message {
            color: red;
            display: none;
        }
        .product {
            margin-bottom: 15px;
        }
        .delete-product {
            margin-left: auto;
        }
    </style>
</head>
<body>
    <main class="page">
        <section class="shopping-cart dark">
            <div class="container">
                <div class="block-heading">
                    <h2>Book Shopping Cart</h2>
                    <p>Offers Available for you...!!! Enjoy here</p>
                </div>
                <div class="content">
                    <div class="row">
                        <div class="col-md-12 col-lg-8">
                            <div class="items">
                                <!-- Products here -->
                                <div class="product">
                                    <div class="row d-flex align-items-center">
                                        <div class="col-md-3">
                                            <img class="img-fluid mx-auto d-block image" src="assets/images/book-4.png">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="info">
                                                <div class="row">
                                                    <div class="col-md-5 product-name">
                                                        <div class="product-name">
                                                            <a href="index.html">The Big of Science</a>
                                                            <div class="product-info">
                                                                “I can survive well enough on my own if given the proper reading material.....”
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 quantity">
                                                        <label for="quantity1">Quantity:</label>
                                                        <input id="quantity1" type="number" value="1" class="form-control quantity-input" data-price="100">
                                                    </div>
                                                    <div class="col-md-3 price">
                                                        <span class="item-total" data-base-price="100">100</span>
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <button class="btn btn-danger btn-sm delete-product" type="button">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="product">
                                    <div class="row d-flex align-items-center">
                                        <div class="col-md-3">
                                            <img class="img-fluid mx-auto d-block image" src="assets/images/book-10.png">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="info">
                                                <div class="row">
                                                    <div class="col-md-5 product-name">
                                                        <div class="product-name">
                                                            <a href="index.html">Monsoon</a>
                                                            <div class="product-info">
                                                                “Reading furnishes the mind only with materials of knowledge....”
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 quantity">
                                                        <label for="quantity2">Quantity:</label>
                                                        <input id="quantity2" type="number" value="1" class="form-control quantity-input" data-price="200">
                                                    </div>
                                                    <div class="col-md-3 price">
                                                        <span class="item-total" data-base-price="200">200</span>
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <button class="btn btn-danger btn-sm delete-product" type="button">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="product">
                                    <div class="row d-flex align-items-center">
                                        <div class="col-md-3">
                                            <img class="img-fluid mx-auto d-block image" src="assets/images/book-8.png">
                                        </div>
                                        <div class="col-md-7">
                                            <div class="info">
                                                <div class="row">
                                                    <div class="col-md-5 product-name">
                                                        <div class="product-name">
                                                            <a href="index.html">Everything you Ever</a>
                                                            <div class="product-info">
                                                                “Until I feared I would lose it, I never loved to read....”
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 quantity">
                                                        <label for="quantity3">Quantity:</label>
                                                        <input id="quantity3" type="number" value="1" class="form-control quantity-input" data-price="300">
                                                    </div>
                                                    <div class="col-md-3 price">
                                                        <span class="item-total" data-base-price="300">300</span>
                                                    </div>
                                                    <div class="col-md-2 text-right">
                                                        <button class="btn btn-danger btn-sm delete-product" type="button">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-4">
                            <div class="summary">
                                <h3>Summary</h3>
                                <div class="summary-item"><span class="text">Subtotal</span><span class="price" id="subtotal">600</span></div>
                                <div class="summary-item"><span class="text">Discount</span><span class="price" id="discount">100</span></div>
                                <div class="summary-item"><span class="text">Delivery Charges</span><span class="price" id="delivery">40</span></div>
                                <div class="summary-item"><span class="text">Total</span><span class="price" id="total">540</span></div>

                                <div class="payment-options">
                                    <h4>Select Payment Method</h4>
                                    <div class="form-check payment-option">
                                        <input class="form-check-input" type="radio" name="paymentMethod" id="payment-cash" value="cash">
                                        <label class="form-check-label" for="payment-cash">Cash on Delivery</label>
                                    </div>
                                    <div class="form-check payment-option">
                                        <input class="form-check-input" type="radio" name="paymentMethod" id="payment-google" value="google">
                                        <label class="form-check-label" for="payment-google">Google Pay</label>
                                    </div>
                                    <div class="form-check payment-option">
                                        <input class="form-check-input" type="radio" name="paymentMethod" id="payment-card" value="card">
                                        <label class="form-check-label" for="payment-card">Credit/Debit Card</label>
                                    </div>

                                    <div class="payment-method-details" id="google-details">
                                        <label for="phone">Phone Number:</label>
                                        <input id="phone" type="tel" class="form-control" placeholder="Enter your phone number">
                                        <div id="google-error" class="error-message">Phone number is required for Google Pay.</div>
                                    </div>

                                    <div class="payment-method-details" id="card-details">
                                        <label for="card-number">Card Number:</label>
                                        <input id="card-number" type="text" class="form-control" placeholder="Enter your card number">
                                        <div id="card-number-error" class="error-message">Card number is required for Credit/Debit Card.</div>
                                        <label for="card-expiry">Expiry Date:</label>
                                        <input id="card-expiry" type="text" class="form-control" placeholder="MM/YY">
                                        <div id="card-expiry-error" class="error-message">Expiry date is required for Credit/Debit Card.</div>
                                        <label for="card-cvc">CVC:</label>
                                        <input id="card-cvc" type="text" class="form-control" placeholder="Enter CVC">
                                        <div id="card-cvc-error" class="error-message">CVC is required for Credit/Debit Card.</div>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-primary btn-lg btn-block" onclick="checkPaymentMethod()">Buy Now</button>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            function updateTotals() {
                let subtotal = 0;
                $(".quantity-input").each(function() {
                    const quantity = $(this).val();
                    const price = $(this).data("price");
                    const itemTotal = quantity * price;
                    $(this).closest(".row").find(".item-total").text(itemTotal);
                    subtotal += itemTotal;
                });
                $("#subtotal").text(subtotal);
                const discount = 60;
                const delivery = 0;
                const total = subtotal - discount + delivery;
                $("#total").text(total);
            }

            $(".quantity-input").on("input", function() {
                updateTotals();
            });

            $("input[name='paymentMethod']").change(function() {
                const method = $(this).val();
                $(".payment-method-details").hide();
                $(".error-message").hide();
                if (method === "google") {
                    $("#google-details").show();
                } else if (method === "card") {
                    $("#card-details").show();
                }
            });

            function checkPaymentMethod() {
                const paymentMethod = $("input[name='paymentMethod']:checked").val();
                if (!paymentMethod) {
                    alert("Please select a payment method.");
                    return;
                }

                $(".error-message").hide();
                let valid = true;

                if (paymentMethod === 'google') {
                    const phoneNumber = $("#phone").val();
                    if (!phoneNumber) {
                        $("#google-error").show();
                        valid = false;
                    }
                } else if (paymentMethod === 'card') {
                    const cardNumber = $("#card-number").val();
                    const expiryDate = $("#card-expiry").val();
                    const cvc = $("#card-cvc").val();
                    if (!cardNumber) {
                        $("#card-number-error").show();
                        valid = false;
                    }
                    if (!expiryDate) {
                        $("#card-expiry-error").show();
                        valid = false;
                    }
                    if (!cvc) {
                        $("#card-cvc-error").show();
                        valid = false;
                    }
                }

                if (valid) {
                    link();
                }
            }

            $(".delete-product").on("click", function() {
                $(this).closest(".product").remove();
                updateTotals();
            });

            $("button").click(function() {
                checkPaymentMethod();
            });
        });

        function link(){
            window.location.href = "payment.html";
        }
    </script>
</body>
</html>
